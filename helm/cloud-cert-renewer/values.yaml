# Default values for cloud-cert-renewer
# This is a YAML-formatted file.

# Service configuration
serviceType: cdn # cdn or lb (backward compatible: slb)

# Cloud provider configuration
cloudProvider: alibaba # alibaba, aws, azure, etc. (currently supports Alibaba Cloud)

# Authentication method
authMethod: access_key # access_key, sts, iam_role, oidc, service_account, env

# Force update flag (optional, default: false)
# When enabled, certificate will be updated even if it's the same
forceUpdate: false

# Webhook configuration (optional)
webhook:
  # Enable webhook notifications
  enabled: false
  # Webhook endpoint URL
  # Example for Slack: https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
  # Example for Discord: https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK
  url: ""
  # Webhook request timeout in seconds (default: 30)
  timeout: 30
  # Number of retry attempts on failure (default: 3)
  retryAttempts: 3
  # Initial delay between retries in seconds (exponential backoff) (default: 1.0)
  retryDelay: 1.0
  # Comma-separated list of events to notify on (default: all events)
  # Options: renewal_started, renewal_success, renewal_failed, renewal_skipped, batch_completed
  enabledEvents: ""
  # Secret containing webhook URL (alternative to specifying url in values)
  secret:
    name: "" # Name of the secret containing webhook URL
    key: "webhook-url" # Key in the secret containing the webhook URL

# Image configuration
image:
  repository: ghcr.io/maskshell/cloud-cert-renewer
  tag: latest
  pullPolicy: IfNotPresent

# Deployment configuration
replicas: 1

# Init container resources
initContainer:
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Main container (placeholder) resources
mainContainer:
  image: ghcr.io/containerd/busybox:latest
  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 100m
      memory: 128Mi

# CDN configuration
cdn:
  # Domain names can be specified as a YAML list (preferred) or comma-separated string (backward compatible)
  # List format (recommended):
  domainName:
    - schema.amugua.com
  # Or use comma-separated string (backward compatible):
  # domainName: schema.amugua.com,www.example.com
  region: cn-hangzhou

# Load Balancer configuration (new name, preferred)
lb:
  instanceId: ""
  listenerPort: 443
  region: cn-hangzhou

# SLB configuration (old name, backward compatible)
slb:
  instanceId: ""
  listenerPort: 443
  region: cn-hangzhou

# Secrets configuration
secrets:
  # Cloud service credentials secret (new name, preferred)
  cloudCredentials:
    name: cloud-credentials
    accessKeyIdKey: access-key-id
    accessKeySecretKey: access-key-secret
    # Security token key (optional, required when authMethod=sts)
    securityTokenKey: "" # e.g., "security-token"
  # Alibaba Cloud credentials secret name (old name, backward compatible)
  alibabaCloudCredentials:
    name: alibaba-cloud-credentials
    accessKeyIdKey: access-key-id
    accessKeySecretKey: access-key-secret
  # Certificate secret name (usually created by cert-manager)
  certificate:
    name: cert-secret
    certKey: tls.crt
    privateKeyKey: tls.key

# Service Account configuration (required for OIDC/RRSA)
serviceAccount:
  # Specifies whether a service account should be created
  create: false
  # Annotations to add to the service account (e.g., for RRSA)
  annotations: {}
    # Example for RRSA:
    # pod-identity.alibabacloud.com/role-name: your-ram-role-name
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# Reloader configuration
reloader:
  enabled: true
  auto: true
  search: true

# Labels and annotations
labels: {}
annotations: {}

# Pod annotations
podAnnotations: {}

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}
